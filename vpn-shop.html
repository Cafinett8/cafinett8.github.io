<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <script src="discount-config.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ ÙÛŒÙ„ØªØ±Ø´Ú©Ù† - Ú©Ø§ÙÛŒ Ù†Øª</title>
    <link rel="stylesheet" href="https://cdn.fontcdn.ir/Font/Persian/B-Titr/BTitr.css">
    <link rel="stylesheet" href="https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ Ù‡Ù…ÙˆÙ† Ù‚Ø¨Ù„ÛŒ */
    </style>
</head>
<body>
    <div class="container">
        <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ù‡Ù…ÙˆÙ† Ù‚Ø¨Ù„ÛŒ -->
    </div>

    <script>
        // Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ù‡Ø§ÛŒÛŒ
        const packages = {
            "1month": [
                { size: "20 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 83000, icon: "ğŸ“±" },
                { size: "30 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 100000, icon: "ğŸ’»" },
                { size: "40 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 117000, icon: "ğŸš€" },
                { size: "50 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 133000, icon: "âš¡" },
                { size: "60 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 150000, icon: "ğŸ”¥" },
                { size: "70 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 183000, icon: "ğŸ¯" },
                { size: "100 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 250000, icon: "ğŸ’" },
                { size: "200 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 500000, icon: "ğŸ‘‘" },
                { size: "300 Ú¯ÛŒÚ¯", duration: "Û± Ù…Ø§Ù‡", price: 750000, icon: "ğŸš€" }
            ],
            "2month": [
                { size: "20 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 108000, icon: "ğŸ“±" },
                { size: "40 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 141000, icon: "ğŸ’»" },
                { size: "60 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 183000, icon: "ğŸš€" },
                { size: "80 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 241000, icon: "âš¡" },
                { size: "100 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 283000, icon: "ğŸ”¥" },
                { size: "120 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 349000, icon: "ğŸ¯" },
                { size: "150 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 399000, icon: "ğŸ’" },
                { size: "200 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 532000, icon: "ğŸ‘‘" },
                { size: "300 Ú¯ÛŒÚ¯", duration: "Û² Ù…Ø§Ù‡", price: 765000, icon: "ğŸš€" }
            ],
            "3month": [
                { size: "60 Ú¯ÛŒÚ¯", duration: "Û³ Ù…Ø§Ù‡", price: 200000, icon: "ğŸ“±" },
                { size: "80 Ú¯ÛŒÚ¯", duration: "Û³ Ù…Ø§Ù‡", price: 266000, icon: "ğŸ’»" },
                { size: "90 Ú¯ÛŒÚ¯", duration: "Û³ Ù…Ø§Ù‡", price: 283000, icon: "ğŸš€" },
                { size: "100 Ú¯ÛŒÚ¯", duration: "Û³ Ù…Ø§Ù‡", price: 299000, icon: "âš¡" },
                { size: "120 Ú¯ÛŒÚ¯", duration: "Û³ Ù…Ø§Ù‡", price: 366000, icon: "ğŸ”¥" },
                { size: "150 Ú¯ÛŒÚ¯", duration: "Û³ Ù…Ø§Ù‡", price: 416000, icon: "ğŸ¯" },
                { size: "200 Ú¯ÛŒÚ¯", duration: "Û³ Ù…Ø§Ù‡", price: 549000, icon: "ğŸ’" },
                { size: "300 Ú¯ÛŒÚ¯", duration: "Û³ Ù…Ø§Ù‡", price: 782000, icon: "ğŸ‘‘" }
            ]
        };

        let selectedPackage = null;
        let selectedDuration = "1month";
        let copyCooldown = false;
        let discountApplied = false;

        // Ø§ÛŒØ¬Ø§Ø¯ ØªØ¨â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Øª Ø²Ù…Ø§Ù†
        function createDurationTabs() {
            const durationTabs = document.getElementById('durationTabs');
            const durations = [
                { id: "1month", name: "ğŸ”· ÛŒÚ© Ù…Ø§Ù‡Ù‡" },
                { id: "2month", name: "ğŸ”· Ø¯Ùˆ Ù…Ø§Ù‡Ù‡" },
                { id: "3month", name: "ğŸ”· Ø³Ù‡ Ù…Ø§Ù‡Ù‡" }
            ];
            
            durations.forEach(duration => {
                const tab = document.createElement('button');
                tab.className = 'duration-tab';
                if (duration.id === selectedDuration) {
                    tab.classList.add('active');
                }
                tab.textContent = duration.name;
                tab.setAttribute('data-duration', duration.id);
                
                tab.addEventListener('click', () => {
                    selectedDuration = duration.id;
                    document.querySelectorAll('.duration-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    tab.classList.add('active');
                    createPricingTable();
                });
                
                durationTabs.appendChild(tab);
            });
        }

        // Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„ Ù‚ÛŒÙ…Øª
        function createPricingTable() {
            const pricingTable = document.getElementById('pricingTable');
            pricingTable.innerHTML = '';
            
            const currentPackages = packages[selectedDuration];
            
            currentPackages.forEach((pkg, index) => {
                const button = document.createElement('button');
                button.className = 'package-btn';
                
                button.innerHTML = `
                    <div class="package-size">${pkg.size}</div>
                    <div class="package-price">${formatPrice(pkg.price)} ØªÙˆÙ…Ø§Ù†</div>
                    <div class="package-duration">${pkg.duration}</div>
                `;
                
                button.addEventListener('click', () => selectPackage(index));
                pricingTable.appendChild(button);
            });
        }

        // Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ Ù‚ÛŒÙ…Øª
        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø³ØªÙ‡
        function selectPackage(index) {
            // Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø¨Ù„ÛŒ
            document.querySelectorAll('.package-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Ø§Ù†ØªØ®Ø§Ø¨ Ø¬Ø¯ÛŒØ¯
            const currentPackages = packages[selectedDuration];
            selectedPackage = currentPackages[index];
            document.querySelectorAll('.package-btn')[index].classList.add('selected');
            
            // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø³ØªÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
            document.getElementById('selectedInfo').style.display = 'block';
            document.getElementById('selectedInfo').innerHTML = `
                âœ… Ø¨Ø³ØªÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: <strong>${selectedPackage.size}</strong>
                - Ù…Ø¨Ù„Øº: <strong>${formatPrice(selectedPackage.price)} ØªÙˆÙ…Ø§Ù†</strong>
                ${discountApplied ? '<br>âœ… Ú©Ø¯ ØªØ®ÙÛŒÙ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯!' : ''}
            `;
        }

        // Ø§Ø¹Ù…Ø§Ù„ Ú©Ø¯ ØªØ®ÙÛŒÙ
        function applyDiscount() {
            const discountCode = document.getElementById('discountCode').value.trim();
            const discountMessage = document.getElementById('discountMessage');
            
            if (discountCode.toUpperCase() === DISCOUNT_CONFIG.VALID_CODE) {
                discountApplied = true;
                discountMessage.innerHTML = `<span class="discount-success">âœ… Ú©Ø¯ ØªØ®ÙÛŒÙ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯! ${DISCOUNT_CONFIG.DISCOUNT_MESSAGE}</span>`;
                
                // Ø§Ú¯Ø± Ø¨Ø³ØªÙ‡â€ŒØ§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ØŒ Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†
                if (selectedPackage) {
                    const finalPrice = Math.max(selectedPackage.price - DISCOUNT_CONFIG.DISCOUNT_AMOUNT, 0);
                    document.getElementById('selectedInfo').innerHTML = `
                        âœ… Ø¨Ø³ØªÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: <strong>${selectedPackage.size}</strong>
                        - Ù…Ø¨Ù„Øº Ø§ØµÙ„ÛŒ: <strong>${formatPrice(selectedPackage.price)} ØªÙˆÙ…Ø§Ù†</strong>
                        - Ù…Ø¨Ù„Øº Ø¨Ø§ ØªØ®ÙÛŒÙ: <strong>${formatPrice(finalPrice)} ØªÙˆÙ…Ø§Ù†</strong>
                        <br>âœ… Ú©Ø¯ ØªØ®ÙÛŒÙ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯!
                    `;
                }
            } else {
                discountApplied = false;
                discountMessage.innerHTML = '<span class="discount-error">âŒ Ú©Ø¯ ØªØ®ÙÛŒÙ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª</span>';
                
                if (selectedPackage) {
                    document.getElementById('selectedInfo').innerHTML = `
                        âœ… Ø¨Ø³ØªÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: <strong>${selectedPackage.size}</strong>
                        - Ù…Ø¨Ù„Øº: <strong>${formatPrice(selectedPackage.price)} ØªÙˆÙ…Ø§Ù†</strong>
                    `;
                }
            }
        }

        // ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ù‡ - Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ ØµÙØ­Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ù‡
        function enterContest() {
            const contestCode = document.getElementById('contestCode').value.trim().toUpperCase();
            const contestMessage = document.getElementById('contestMessage');
            
            if (!contestCode) {
                contestMessage.innerHTML = '<span class="contest-error">Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</span>';
                return;
            }
            
            // Ú©Ø¯Ù‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø±
            const validCodes = ['VPN1', 'FREE2024', 'TEST123'];
            
            if (validCodes.includes(contestCode)) {
                contestMessage.innerHTML = '<span class="contest-success">âœ… Ú©Ø¯ Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª! Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªÙ‚Ø§Ù„...</span>';
                
                // Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ ØµÙØ­Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ø¨Ø§ Ù¾Ø§Ø±Ø§Ù…ØªØ± Ú©Ø¯
                setTimeout(() => {
                    window.location.href = `contest.html?code=${contestCode}`;
                }, 1500);
            } else {
                contestMessage.innerHTML = '<span class="contest-error">âŒ Ú©Ø¯ Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª</span>';
            }
        }

        // Ú©Ù¾ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª
        function copyCardNumber() {
            if (copyCooldown) return;
            
            const cardNumber = "6219861987348090";
            
            // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ú©ÙˆÙ„â€ŒØ¯Ø§ÙˆÙ†
            copyCooldown = true;
            
            const copyToClipboard = (text) => {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    return navigator.clipboard.writeText(text);
                }
                
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.top = '0';
                textArea.style.left = '0';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                    const successful = document.execCommand('copy');
                    document.body.removeChild(textArea);
                    return Promise.resolve();
                } catch (err) {
                    document.body.removeChild(textArea);
                    return Promise.reject(err);
                }
            };
            
            copyToClipboard(cardNumber)
                .then(() => {
                    showCopyPopup();
                })
                .catch((err) => {
                    console.log('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ:', err);
                    showCopyPopup();
                })
                .finally(() => {
                    setTimeout(() => {
                        copyCooldown = false;
                    }, 500);
                });
        }

        function showCopyPopup() {
            document.getElementById('copyPopup').style.display = 'flex';
        }

        function closeCopyPopup() {
            document.getElementById('copyPopup').style.display = 'none';
        }

        // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ÙˆØ§ØªØ³Ø§Ù¾
        function sendToWhatsApp() {
            if (!selectedPackage) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ø¨Ø³ØªÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ ØªØ®ÙÛŒÙ
            let finalPrice = selectedPackage.price;
            if (discountApplied) {
                finalPrice = Math.max(selectedPackage.price - DISCOUNT_CONFIG.DISCOUNT_AMOUNT, 0);
            }
            
            const message = `Ø³Ù„Ø§Ù…! ğŸ‘‹

ğŸ“¦ **Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø±ÛŒØ¯ ÙÛŒÙ„ØªØ±Ø´Ú©Ù†**
â€¢ Ø¨Ø³ØªÙ‡: ${selectedPackage.size}
â€¢ Ù…Ø¯Øª: ${selectedPackage.duration}
â€¢ Ù…Ø¨Ù„Øº Ø§ØµÙ„ÛŒ: ${formatPrice(selectedPackage.price)} ØªÙˆÙ…Ø§Ù†
${discountApplied ? `â€¢ Ù…Ø¨Ù„Øº Ø¨Ø§ ØªØ®ÙÛŒÙ: ${formatPrice(finalPrice)} ØªÙˆÙ…Ø§Ù†` : ''}

âœ… Ù…Ø¨Ù„Øº ÙˆØ§Ø±ÛŒØ² Ø´Ø¯.
Ù„Ø·ÙØ§Ù‹ Ø±Ø³ÛŒØ¯ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ ØªØ§ Ø³Ø±ÙˆÛŒØ³ Ø¨Ø±Ø§ÛŒØªØ§Ù† Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯.

Ø¨Ø§ ØªØ´Ú©Ø±`;
            
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/989224044842?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            createDurationTabs();
            createPricingTable();
        });

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† event listener Ø¨Ø±Ø§ÛŒ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ù„ Ú©Ø§Ø±Øª
        document.addEventListener('click', function(e) {
            if (e.target.closest('.bank-card')) {
                copyCardNumber();
            }
        });
    </script>
</body>
</html>
